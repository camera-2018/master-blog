# java_crudç¯å¢ƒé…ç½®æ•™ç¨‹

æœ¬æ–‡ä¼šä»å®‰è£…å¼€å§‹ï¼Œåˆ°æœ€åå†™å‡ºä¸€ä¸ªå¸¦å‘½ä»¤è¡Œäº¤äº’çª—å£çš„CRUDçš„å°é¡¹ç›®.

# å®‰è£…

## å®‰è£…JDK

[å®‰è£…åœ°å€](https://www.oracle.com/java/technologies/downloads/#jdk17-windows)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221643.png)

 å»ºè®®ä¸‹è½½java17ä»¥é˜²æ­¢æœ‰ä¾èµ–é—®é¢˜

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221712.png)

ç‚¹å‡»è¿™ä¸ªä¸‹è½½`.msi`å®‰è£…åŒ…æ¥å®‰è£…

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221734.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221748.png)

è¿™é‡Œå»ºè®®ä¸è¦æ›´æ”¹**é»˜è®¤ä½ç½®**

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221802.png)

å®‰è£…å®ŒæˆğŸ¥³

## è®¾ç½®ç¯å¢ƒå˜é‡

åœ¨`Windowså¼€å§‹èœå•`æœç´¢`ç¯å¢ƒå˜é‡`

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221840.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221858.png)

åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸‹é¢ç‚¹å‡»æ–°å»º

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221915.png)

å˜é‡åè®¾ç½®ä¸º `JAVA_HOME`

å˜é‡å€¼è®¾ç½®ä¸º `C:\Program Files\Java\jdk-17.0.4.1` å¦‚æœä½ æœ‰å®‰è£…åˆ°å…¶ä»–ç›®å½•è¯·å¡«å…¶ä»–ç›®å½•

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221927.png)

æ–°å»ºç¯å¢ƒå˜é‡ `CLASS_PATH` 

å˜é‡å€¼ä¸º `.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;`

å¦‚ä¸‹å›¾æ‰€ç¤º

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929221948.png)

æ³¨æ„ å˜é‡å€¼æ¯”è¾ƒå¥‡æ€ª å¯èƒ½ç†è§£ä¸èƒ½  ä½†æ˜¯è¦ç…§ä¸Šå¡«å†™

åœ¨ç³»ç»Ÿå˜é‡é‡Œæ‰¾åˆ°`path` åŒå‡»

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222004.png)

ç‚¹å‡»æ–°å»º  å€¼å¡«å†™

`%JAVA_HOME%\bin`

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222021.png)

ç‚¹å‡»ç¡®å®š

æ¥ä¸‹æ¥æŒ‰ Windowsé”®åŠ Ré”®  è¾“å…¥cmdç‚¹ç¡®å®š

åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥`java --version`

å¦‚æœ‰æ­£å¸¸ä¸æŠ¥é”™åˆ™é…ç½®æˆåŠŸğŸ¥³

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222038.png)

## å®‰è£…MySQL

[MySQL :: Download MySQL Installer (Archived Versions)](https://downloads.mysql.com/archives/installer/)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222056.png)

åŒå‡»æ‰“å¼€

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222109.png)

é€‰default

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222120.png)

ç›´æ¥next

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222134.png)

yes

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222149.png)

Execute

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222201.png)

ä¸€è·¯next

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222212.png)

è®¾ä¸€ä¸ªå¯†ç 

ç„¶åä¸€è·¯next

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222223.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222238.png)

ç‚¹check

ç‚¹next

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929222255.png)

æœ€åä¼šè·³å‡ºè¿™ä¹ˆä¸€ä¸ªå¥‡å¥‡æ€ªæ€ªçš„ MySQL JS çš„å‘½ä»¤è¡Œ ï¼ˆè¯´å®è¯æˆ‘æ²¡æ‡‚ä¸ºä»€ä¹ˆæœ‰è¿™ç©æ„

ï¼ˆä¸è¿‡ä½ å¯ä»¥åœ¨ä¸Šé¢ç©ç© JS çš„ç‰¹æ€§   ï¼šï¼‰

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929230157.png)

å’Œå‘½ä»¤è¡ŒåŒæ—¶å¼¹å‡ºæ¥çš„æ˜¯workbench 

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929230229.png)

MySQLå·²å®‰è£…å®ŒæˆğŸ¥³

## å®‰è£… JetBrain IntelliJ IDEA

[ä¸‹è½½åœ°å€](https://www.jetbrains.com/zh-cn/idea/)

ç›´æ¥ä¸‹è½½å’¯ 0é…ç½®çš„

# åˆ›å»ºé¡¹ç›®

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929230750.png)

æ–°å»ºé¡¹ç›®

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929230914.png)

åˆ›å»ºé…ç½®å¦‚å›¾æ‰€ç¤º

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231039.png)

ç‚¹è¿› `src/main/java/org/example/main`è¿è¡Œä¸€ä¸‹è¯•è¯•

## é…ç½®Maven

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231348.png)

ç‚¹å‡»ç¼–è¾‘é…ç½®

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231437.png)

æ–°å»ºä¸€ä¸ªMavené…ç½®

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231601.png)

é…ç½®å¦‚å›¾ ä¿å­˜åº”ç”¨

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231748.png)

ç‚¹å‡»è¿è¡Œ

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231717.png)

buildæˆåŠŸåä¼šç”Ÿæˆä¸€ä¸ªsnapshotçš„jar

æ¥ä¸‹æ¥æ˜¯å®‰è£…mavenä¾èµ–é¡¹

æ‰“å¼€pom.xml å³é”®ç‚¹ç”Ÿæˆ

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231903.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929231942.png)

æœç´¢ mysql-connector æ·»åŠ è¿™ä¸ª8ç‰ˆæœ¬çš„ä¾èµ–

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929232035.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220930000633.png)

ç”Ÿæˆäº†å¦‚å›¾çš„ä»£ç åˆ™æˆåŠŸ

åœ¨ä¸ dependencies åŒçº§çš„æ ‡ç­¾ä¸‹é¢ æ·»åŠ å¦‚ä¸‹ä»£ç  é…ç½®mavenä¾èµ–è‡ªåŠ¨å®‰è£…

```xml
 <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <classpathPrefix>lib/</classpathPrefix>
                            <mainClass>org.example.Main</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
```

ç‚¹å‡»å³ä¸Šè§’ ![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929232533.png) é‡æ–°åŠ è½½mavenå˜æ›´

## åŠ è½½æ•°æ®åº“&&åˆ›å»ºæ•°æ®è¡¨

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929232829.png)

åœ¨å³è¾¹çš„ä¾§è¾¹æ ä¸­æ‰¾åˆ°æ•°æ®åº“  æ·»åŠ ä¸€ä¸ªMySQL

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929233002.png)

è¾“å…¥ä½ åˆšè®¾ç½®çš„è´¦å·å¯†ç è¿æ¥

å¼¹å‡ºä¸€ä¸ªconsole

åœ¨é‡Œé¢è¾“å…¥

```sql
CREATE DATABASE `java_crud_demo` CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_general_ci';
```

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929233123.png)

ç»¿è‰²æ¡†å†…æ˜¯ideaè¯†åˆ«å‡ºæ¥çš„sqlè¯­å¥  ç‚¹å‡»å·¦ä¸Šç»¿è‰²ç®­å¤´æ‰§è¡Œ

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929233231.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929233308.png)

å³ä¾§æ•°æ®åº“æ é‡Œä¼šå‡ºç°ä½ åˆšåˆ›å»ºçš„æ•°æ®åº“ ä½†æ˜¯é‡Œé¢æ²¡æœ‰è¡¨

åœ¨consoleé‡Œè¾“å…¥

```sql
create table if not exists `java_crud_demo`.`article_table`
(
    id     int unsigned auto_increment
        primary key,
    title  varchar(100) not null,
    author varchar(40)  not null,
    time   datetime     null
);
```

ctrl + a å…¨é€‰ä¸­ ç„¶åç‚¹æ‰§è¡Œ

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929233643.png)

ç”Ÿæˆäº†è¡¨article_table é‡Œé¢æ²¡æœ‰æ•°æ®

ç®€å•çš„å¡«å……æ•°æ® å¯ä»¥ consoleè¾“å…¥

```sql
INSERT INTO `java_crud_demo`.`article_table` (`title`, `author`, `time`)
VALUES ('æ ‡é¢˜', 'ä½œè€…', NOW());
```

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929234014.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220929234049.png)

æ’å…¥å®Œäº†è®°å¾—ç‚¹è¿™ä¸ªåˆ·æ–°

ä¹Ÿå¯ä»¥ç›´æ¥åœ¨tableé¢„è§ˆç•Œé¢

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20220930000521.png)

æ·»åŠ è¡Œ è¾“å…¥å®Œæ¯•å ç‚¹æäº¤

## æ•°æ®åº“crudæ¨¡æ¿

æ–°å»ºä¸€ä¸ªcrud.java

```java
package org.example;

import java.sql.*;

public class Crud {

    // MySQL 8.0 ä»¥ä¸‹ç‰ˆæœ¬ - JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL
    //static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";
    //static final String DB_URL = "jdbc:mysql://localhost:3306/java_crud_demo";

    // MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬ - JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL
    static final String JDBC_DRIVER = "com.mysql.cj.jdbc.Driver";
    static final String DB_URL = "jdbc:mysql://localhost:3306/java_crud_demo?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC";


    // æ•°æ®åº“çš„ç”¨æˆ·åä¸å¯†ç ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®
    static final String USER = "root";
    static final String PASS = "123456";

    public static void main(String[] args) {
        Connection conn = null;
        Statement stmt = null;
        try{
            // æ³¨å†Œ JDBC é©±åŠ¨
            Class.forName(JDBC_DRIVER);

            // æ‰“å¼€é“¾æ¥
            System.out.println("è¿æ¥æ•°æ®åº“...");
            conn = DriverManager.getConnection(DB_URL,USER,PASS);

            // æ‰§è¡ŒæŸ¥è¯¢
            System.out.println(" å®ä¾‹åŒ–Statementå¯¹è±¡...");
            stmt = conn.createStatement();
            String sql;
            sql = "SELECT id, title, author, time FROM java_crud_demo";
            ResultSet rs = stmt.executeQuery(sql);

            // å±•å¼€ç»“æœé›†æ•°æ®åº“
            while(rs.next()){
                // é€šè¿‡å­—æ®µæ£€ç´¢
                int id  = rs.getInt("id");
                String title = rs.getString("title");
                String author = rs.getString("author");
                String time = rs.getString("time");

                // è¾“å‡ºæ•°æ®
                System.out.println("ID: " + id);
                System.out.println("æ ‡é¢˜ï¼š" + title);
                System.out.println("ä½œè€…ï¼š" + author);
                System.out.println("æ—¶é—´ï¼š" + time);
            }
            // å®Œæˆåå…³é—­
            rs.close();
            stmt.close();
            conn.close();
        }catch(SQLException se){
            // å¤„ç† JDBC é”™è¯¯
            se.printStackTrace();
        }catch(Exception e){
            // å¤„ç† Class.forName é”™è¯¯
            e.printStackTrace();
        }finally{
            // å…³é—­èµ„æº
            try{
                if(stmt!=null) stmt.close();
            }catch(SQLException se2){
            }// ä»€ä¹ˆéƒ½ä¸åš
            try{
                if(conn!=null) conn.close();
            }catch(SQLException se){
                se.printStackTrace();
            }
        }
        System.out.println("Goodbye!");
    }
}
```

æ¥ä¸‹æ¥æ„‰å¿«å†™ä½ çš„ä»£ç ä¸»é€»è¾‘å’¯ğŸ¥³

## åŒå‡»æ‰“å¼€jar

```java
package org.example;

import java.io.File;

public class Main {
    public static void main(String[] args) {
        if (args.length == 0) {
            try {
                String path = System.getProperty("java.class.path");
                int lastIndex = path.lastIndexOf(File.separator) + 1;
                String file_name = path.substring(lastIndex);
                ProcessBuilder pb = new ProcessBuilder();
                pb.directory(new File("."));
                System.out.printf("%s %s %s %s %s %s %s", "cmd", "/c", "start", "java", "-jar", file_name, "eject");
                        pb.command("cmd", "/c", "start", "java", "-jar", file_name, "eject");
                pb.start();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                System.exit(0);
            }
        }
        else {
            //ä¸»å‡½æ•°
            System.out.println("Hello World!");
        }
    }
    
}
```

åœ¨mainå¼€å¤´åŠ ä¸Šè¿™æ ·ä¸€æ®µ ä»–ä¼šå¸®ä½ è¾“å…¥å‘½ä»¤æ¥æ‰“å¼€ä¸€ä¸ªå¼¹å‡ºçš„æ–°çª—å£å•¦ğŸ¥³

## ç»“æŸ

Maven æ„å»ºä¹‹åå°±å¾—åˆ°äº†éœ€è¦çš„jaråŒ…äº†ğŸ¥³
