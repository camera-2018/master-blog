---
title: é’è®­è¥ä»»åŠ¡-æˆ‘çš„åç‰‡-å¯çˆ±æâ˜º
date: 2023-1-28 22:57:58
---
**å½“é’è®­è¥é‡ä¸Šç ä¸Šæ˜é‡‘**

## ä¸»é¢˜ä»‹ç»

- #### ä¸»é¢˜ 1ï¼šæˆ‘çš„åç‰‡

  åç‰‡æ˜¯å‘äººä»‹ç»è‡ªæˆ‘çš„é‡è¦å·¥å…·ï¼Œä½œä¸ºä¸€åç¨‹åºå‘˜ç”¨ä»£ç åšè‡ªæˆ‘ä»‹ç»æ˜¯ä¸€ä»¶éå¸¸é…·ç‚«çš„äº‹æƒ…ã€‚è¯·å¤§å®¶å›´ç»•â€œæˆ‘çš„åç‰‡â€è¿™ä¸ªä¸»é¢˜è¿›è¡Œä»£ç åˆ›ä½œã€‚

## æ€è·¯

æ—¢ç„¶è¯´æ•´ä¸ªé…·ç‚«çš„

ç›´æ¥ä¸Šæ¡†æ¶

https://github.com/antfu/vitesse-webext

è¿™ä¸ªæ¨¡æ¿æ˜¯åŸºäºVueçš„webextï¼ˆæµè§ˆå™¨æ’ä»¶æ‰‹è„šæ¶ï¼‰

webextæ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æ„å»ºã€è¿è¡Œå’Œæµ‹è¯•Webæ‰©å±•çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

https://wiki.mozilla.org/WebExtensions

webextçš„ç›®æ ‡æ˜¯ä»¥ä¸€ç§æ ‡å‡†çš„ã€å¯ç§»æ¤ã€è·¨å¹³å°çš„æ–¹å¼æ”¯æŒæµè§ˆå™¨æ‰©å±•ã€‚æœ€åˆï¼Œå®ƒå°†ä¸ºå¼€å‘ç«ç‹æ‰©å±•æä¾›ä¸€ä¸ªç®€åŒ–çš„ä½“éªŒã€‚

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•ç±»å‹çš„åç‰‡

## æŠ€æœ¯æ ˆ

- âš¡ï¸ Vite å¿«é€Ÿæ„å»º
- ğŸ¥ Vue 3 -ç»„åˆå¼api 3.2+setupè¯­æ³•
- ğŸ’¬[`webext-bridge`](https://github.com/antfu/webext-bridge) çš„local storage å’Œ [VueUse](https://github.com/antfu/vueuse) çš„ä½¿ç”¨ç»“åˆ
- ğŸŒˆ [UnoCSS](https://github.com/unocss/unocss) - åŸå­åŒ–CSSå¼•æ“
- ğŸ¦¾ [TypeScript](https://www.typescriptlang.org/) è¯­æ³•æ”¯æŒ
- ğŸ“¦ [Components auto importing](https://github.com/antfu/vitesse-webext/blob/main/src/components) è‡ªåŠ¨å¼•å…¥
- ğŸŒ WebExtension - æ ‡å‡†æµè§ˆå™¨æ‰©å±•æ‰‹è„šæ¶ å¯ä»¥ä¸€é”®ç”Ÿæˆchromiumã€Firefoxé€‚é…çš„æ‰©å±•
- ğŸ˜´ mv3 - manifest v3

## å‘

æœ¬èº«è¿™ä¸ªé¡¹ç›®æ²¡ä»€ä¹ˆå‘çš„ã€åªæ˜¯

ğŸ˜¡

æµè§ˆå™¨åœ¨2023å¹´æŠ›å¼ƒmanifest v2

æ‰€ä»¥ä½¿ç”¨manifest v2æ‰“åŒ…åçš„æµè§ˆå™¨æ‰©å±•æµè§ˆå™¨ä¸è®¤

ä¼šæ˜¾ç¤º

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20230128210235.png)

ğŸ˜±

è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯æœ¬èº«ä¸å¤ªä¼šCSS

è°ƒCSSèŠ±äº†å¾ˆé•¿æ—¶é—´

ä½†æ˜¯unocssè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„

## ä»£ç å®ç°

```vue
<script setup>
import { useImage } from '@vueuse/core'
const avatarUrl = 'https://s1.ax1x.com/2023/01/23/pSYuIYD.png'
const waka = 'https://wakatime.com/badge/user/84476697-3421-4720-bcdc-efb5c0fbc1b8.svg?style=flat-square'
const kita = 'https://www.z4a.net/images/2023/01/28/kita.gif'
const { isLoading } = useImage({ src: avatarUrl })
const { isLoading_waka } = useImage({ src: waka })
const { isLoading_kita } = useImage({ src: kita })
const to_left = () => {
  document.getElementsByClassName('img')[0].classList.remove('to_right')
  document.getElementsByClassName('right_text')[0].classList.remove('to_right_text')
  document.getElementsByClassName('right_block')[0].classList.remove('to_right_block')
  document.getElementsByClassName('left_block')[0].classList.remove('to_left_block')
  document.getElementsByClassName('left_img')[0].classList.remove('to_left_img')
}
const to_right = () => {
  document.getElementsByClassName('img')[0].classList.add('to_right')
  document.getElementsByClassName('right_text')[0].classList.add('to_right_text')
  document.getElementsByClassName('right_block')[0].classList.add('to_right_block')
  document.getElementsByClassName('left_block')[0].classList.add('to_left_block')
  document.getElementsByClassName('left_img')[0].classList.add('to_left_img')
}
</script>

<template>
  <main class="w-[384px] h-[256px] text-center text-light-700 bg-[#f69db2] font-sans">
    <div class="h-100% w-100% flex flex-row justify-between p-5 items-center gap-5">
      <div class="absolute left-0 top-0 translate-x-[-100%]">
        <div class="flex flex-col justify-end left_block duration-700 ">
          <div class="bg-[#60c5e7] p-5" />
          <div class="bg-[#f3d263] p-5" />
        </div>
      </div>
      <div class="absolute left-0 top-0 translate-x-[-100%]">
        <span v-if="isLoading" class="animate-pulse bg-[#0A4445] px-11.5 py-16 text-center font-black">Loading</span>
        <img v-else :src="kita" class="left_img duration-400">
      </div>
      <span v-if="isLoading" class="animate-pulse bg-[#0A4445] px-11.5 py-16 text-center font-black">Loading</span>
      <img v-else :src="avatarUrl" class="w-35 h-35 img duration-700">
      <div class="flex flex-col gap-5 h-119%">
        <div class="flex flex-row justify-end translate-x-4.9 right_block duration-700 ">
          <div class="bg-[#60c5e7] p-5" />
          <div class="bg-[#f3d263] p-5" />
        </div>
        <div class="flex flex-col gap-5 pt-8 right_text duration-700 ">
          <div class="text-center font-bold text-lg text-[#df4b57]">
            ğŸ‘‹  Hi, Iâ€™m  @camera-2018
          </div>
          <span v-if="isLoading" class="animate-pulse bg-[#0A4445] px-15 text-center font-black">Loading</span>
          <a v-else href="https://wakatime.com/@84476697-3421-4720-bcdc-efb5c0fbc1b8"><img :src="waka" alt="Total time coded since May 9 2022"></a>
        </div>
      </div>
    </div>
    <footer class="bg-[#f69db2] ">
      <button class="i-carbon-caret-left hover:bg-[#1DCED1] bg-light-50" @click="to_left" />
      <button class="i-carbon-caret-right hover:bg-[#1DCED1] bg-light-50" @click="to_right" />
    </footer>
  </main>
</template>

<style>
.to_right{
  @apply translate-x-142% transition
}

.to_right_text {
  @apply translate-x-190% transition
}

.to_right_block {
  @apply translate-y-[-120%] transition
}

.to_left_block {
  @apply translate-x-100% transition
}

.to_left_img {
  @apply translate-x-90% transition
}
</style>

```

ä¸»è¦çš„ä»£ç å°±è¿™ä¹ˆå¤š

### å¤§æ¦‚æ€è·¯æ˜¯

1. é€šè¿‡unocssçš„é¢„è®¾æ·»åŠ ä½¿ç”¨@applyçš„æ ·å¼

2. å†é€šè¿‡jsæ·»åŠ æ ·å¼åˆ°å…ƒç´ ä¸Š

3. ä½¿ç”¨è¿‡æ¸¡æ•ˆæœ æ·»åŠ è¿‡æ¸¡æ—¶é—´
4. å›¾ç‰‡åŠ è½½éƒ¨åˆ†ä½¿ç”¨vueuseçš„useImage æ²¡åŠ è½½å‡ºæ¥ä¹‹å‰æ˜¯æœ‰ä¸ªloadingçš„ç•Œé¢
5. ä½¿ç”¨äº†ä¸€ä¸ªwakatimeçš„svgå±•ç¤ºæœ€è¿‘æ•²ä»£ç æ—¶é—´ç‚¹å‡»å¯çœ‹

## æ•ˆæœ

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/GIF%202023-1-28%2020-45-47.gif)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20230128213920.png)

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20230128214002.png)

## çµæ„Ÿ

https://mzh.moegirl.org.cn/%E5%90%8E%E8%97%A4%E4%B8%80%E9%87%8C

å¤åˆ»äº†å­¤ç‹¬æ‘‡æ»š åè—¤ä¸€é‡Œ çš„é…è‰² å³ä¸Šè§’æˆ–å·¦ä¸Šè§’çš„æ–¹å—ä¸ºæ³¢å¥‡é…±çš„å‘é¥°

## æºä»£ç 

ä»£ç å¼€æºäº

https://github.com/camera-2018/business-card-mv3

å¯ä»¥åœ¨[Releases](https://github.com/camera-2018/business-card-mv3/releases)ä¸­ä¸‹è½½ç¼–è¯‘å¥½çš„æ‰©å±• è§£å‹ç„¶åç‚¹å‡»æµè§ˆå™¨çš„æ‰©å±•ç¨‹åºé€‰é¡¹å¡ `chrome://extensions/`

è®°å¾—è¦å¼€å³ä¸Šè§’çš„å¼€å‘è€…æ¨¡å¼å“¦

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20230128212633.png)

ç„¶ååŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºå°±å¯ä»¥äº†

## popupéƒ¨åˆ†ä»£ç 

[popup](https://github.com/camera-2018/business-card-mv3/tree/refactor/mv3/src/popup)éƒ¨åˆ†ä»£ç æ”¾åœ¨ç ä¸Šæ˜é‡‘ä¸Š

https://code.juejin.cn/api/raw/7193666089241772090?id=7193666089241821242

ç”±äºä¾èµ–æ¯”è¾ƒå¤šï¼Œè€Œç ä¸Šæ˜é‡‘æ‹‰ä¸åˆ°cdnjsdelivrçš„æ•°æ®

æ‰€ä»¥åœ¨ç ä¸Šæ˜é‡‘ä¸Šæ˜¯æ— æ³•æ­£å¸¸æ˜¾ç¤ºçš„ğŸ˜¥ æƒ³è¯•è¯•çš„è¯è¯·å»https://github.com/camera-2018/business-card-mv3æºç 

![](https://picxyxsw.oss-cn-hangzhou.aliyuncs.com/20230128213154.png)

## å‚è€ƒ

https://code.juejin.cn/pen/7193666089241772090

https://juejin.cn/post/7187753682421678137

https://mzh.moegirl.org.cn/%E5%90%8E%E8%97%A4%E4%B8%80%E9%87%8C

https://github.com/antfu/vitesse-webext